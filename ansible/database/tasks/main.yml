- name: Pull latest database image
  community.docker.docker_image:
    name: aminesl/tp-devops-database
    tag: latest
    source: pull
    force_source: true

- name: Launch PostgreSQL
  community.docker.docker_container:
    name: database
    image: aminesl/tp-devops-database:latest
    pull: true
    env:
      POSTGRES_USER: "{{ PG_USER }}"
      POSTGRES_PASSWORD: "{{ PG_PASSWORD }}"
      POSTGRES_DB: "{{ PG_DATABASE }}"
    networks:
      - name: mynetwork
    state: started
